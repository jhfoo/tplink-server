(function(e){function t(t){for(var n,i,c=t[0],s=t[1],l=t[2],u=0,v=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&v.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(v.length)v.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var s=a[i];0!==o[s]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},o={app:0},r=[];function i(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"9b274982"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a=o[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=n);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.src=i(e);var l=new Error;r=function(t){s.onerror=s.onload=null,clearTimeout(u);var a=o[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,a[1](l)}o[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/public/",c.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"app"}},[a("v-navigation-drawer",{attrs:{app:"",absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"},model:{value:e.SelectedSidebarList,callback:function(t){e.SelectedSidebarList=t},expression:"SelectedSidebarList"}},e._l(e.MainMenu,(function(t){return a("v-list-item",{key:t.name,on:{click:function(a){return e.$router.replace(t.to)}}},[a("v-list-item-title",[e._v(e._s(t.name))])],1)})),1)],1)],1),a("v-app-bar",{attrs:{color:"deep-purple accent-4",app:"",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("v-toolbar-title",[e._v("TP-Link Smart Home Dashboard")]),a("v-spacer"),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},e._l(e.MainMenu,(function(t){return a("v-btn",{key:t.name,on:{click:function(a){return e.$router.replace(t.to)}}},[e._v(e._s(t.name))])})),1),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-dots-vertical")])],1)],1),a("v-main",[a("router-view")],1),a("v-footer",{attrs:{app:"",dark:""}},[e._v(" Footer ")])],1)},r=[],i={name:"App",data:function(){return{drawer:!1,SelectedSidebarList:0,BottomNav:"favorites",MainMenu:[{name:"Home",to:"/"},{name:"Page 2",to:"/page2"},{name:"About",to:"/about"}]}}},c=i,s=a("2877"),l=a("6544"),u=a.n(l),d=a("7496"),v=a("40dc"),f=a("5bc1"),p=a("8336"),m=a("553a"),h=a("132d"),b=a("8860"),y=a("da13"),g=a("1baa"),_=a("5d23"),S=a("f6c4"),w=a("f774"),k=a("2fa4"),V=a("2a7f"),x=Object(s["a"])(c,o,r,!1,null,null,null),A=x.exports;u()(x,{VApp:d["a"],VAppBar:v["a"],VAppBarNavIcon:f["a"],VBtn:p["a"],VFooter:m["a"],VIcon:h["a"],VList:b["a"],VListItem:y["a"],VListItemGroup:g["a"],VListItemTitle:_["b"],VMain:S["a"],VNavigationDrawer:w["a"],VSpacer:k["a"],VToolbarItems:V["a"],VToolbarTitle:V["b"]});var T=a("f309");n["a"].use(T["a"]);var R=new T["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}),L=(a("d3b7"),a("8c4f")),O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},C=[],D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{staticClass:"pa-0 ma-0",attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12",md:"2"}},[e._v(" xx ")]),a("v-col",{attrs:{cols:"12",md:"7"}},[a("DeviceList")],1),a("v-col",{attrs:{cols:"12",md:"3"}},[e._v(" xx ")])],1)],1)],1)},j=[],F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{attrs:{dark:"",flat:"",dense:"",src:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg"}},[a("v-toolbar-title",[e._v("Vuetify")]),a("v-spacer"),a("v-toolbar-items"),a("v-checkbox",{staticClass:"pt-5",attrs:{disabled:""},model:{value:e.FakeLed,callback:function(t){e.FakeLed=t},expression:"FakeLed"}}),a("v-switch",{staticClass:"pt-5",attrs:{label:"Auto",color:e.AutoRefreshColor},on:{change:e.onToggleAutoRefresh},model:{value:e.isAutoRefresh,callback:function(t){e.isAutoRefresh=t},expression:"isAutoRefresh"}}),a("v-btn",{attrs:{icon:"",disabled:e.isAutoRefresh},on:{click:function(t){return e.updateDevices(!0)}}},[a("v-icon",[e._v("mdi-refresh")])],1)],1),a("v-data-table",{attrs:{headers:e.TableLabels,items:e.devices,"item-key":"host",dense:""},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{on:{click:function(t){return e.showDeviceDetail(n)}}},[e._v("mdi-file-find-outline")]),""!==n.RelayState?a("v-icon",{on:{click:function(t){return e.onToggleOnOff(n)}}},[e._v(e._s(e.getRelayIcon(n)))]):e._e()]}}])}),a("v-bottom-sheet",{attrs:{inset:""},model:{value:e.isShowSheet,callback:function(t){e.isShowSheet=t},expression:"isShowSheet"}},[a("v-sheet",[a("v-card",[a("v-card-title",[e._v("Device Properties")]),a("v-simple-table",{attrs:{"fixed-header":"",height:"400px",dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-right"},[e._v("Property")]),a("th",{staticClass:"text-left"},[e._v("Value")])])]),a("tbody",e._l(e.SelectedDevice,(function(t){return a("tr",{key:t.key},[a("td",{staticClass:"text-right"},[e._v(e._s(t.key))]),a("td",{staticClass:"text-left"},[e._v(e._s(t.value))])])})),0)]},proxy:!0}])}),a("div",{staticClass:"text-center"},[a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){e.isShowSheet=!1}}},[e._v("close")])],1),a("v-card-actions")],1)],1)],1)],1)},P=[],I=(a("99af"),a("4160"),a("d81d"),a("b0c0"),a("b64b"),a("159b"),a("bc3a")),M=a.n(I),E=5e3,$="ON",N="OFF",B="",H="http://192.168.80.15:8080",W={name:"DeviceList",data:function(){return{devices:[],isAutoRefresh:!0,RefreshTimer:null,isApiAvail:!0,FakeLed:!0,isShowSheet:!1,SelectedDevice:null,TableLabels:[{text:"Name",value:"name"},{text:"Type",value:"model"},{text:"Status",value:"status"},{text:"Actions",value:"actions"}]}},mounted:function(){this.updateDevices()},unmounted:function(){clearTimeout(this.RefreshTimer),this.isAutoRefresh=!1,this.RefreshTimer=null},computed:{AutoRefreshColor:function(){return this.isApiAvail?"success":"error"}},methods:{showDeviceDetail:function(e){var t=this;this.SelectedDevice=[],Object.keys(e).forEach((function(a){t.SelectedDevice.push({key:a,value:e[a]})})),console.log(e),console.log(this.SelectedDevice),this.isShowSheet=!0},getRelayIcon:function(e){return e.RelayState===$?"mdi-lightbulb-on":"mdi-lightbulb-outline"},onToggleOnOff:function(e){var t,a,n=this;"RelayState"in e&&(e.RelayState===$?(t="".concat(H,"/api/device/").concat(e.host,"/relay/off"),a=N):(t="".concat(H,"/api/device/").concat(e.host,"/relay/on"),a=$),M.a.get(t).then((function(t){!0===t.data&&(e.RelayState=a,n.$forceUpdate())})).catch((function(e){console.log(e)})))},onToggleAutoRefresh:function(){this.isAutoRefresh&&this.updateDevices()},updateDevices:function(e){var t=this;if(e||this.isAutoRefresh){this.FakeLed=!0;var a=new Date;M.a.get("".concat(H,"/api/device/list")).then((function(e){t.devices=Object.keys(e.data).map((function(a){var n={host:a,model:"",name:"",RelayState:B,LastScan:""};if(0===e.data[a].err_code){n.status="ALIVE";var o=e.data[a];"relay_state"in o&&(n.RelayState=e.data[a].relay_state?$:N),n.model="".concat(e.data[a].dev_name," - ").concat(e.data[a].model),n.name=e.data[a].alias,n.LastScan=e.data[a].LastScan,n.mac=e.data[a].mac,n.DeviceId=e.data[a].deviceId}else n.status="UNKNOWN";return t.isApiAvail=!0,n}))})).catch((function(e){t.isApiAvail=!1,console.error(e)})).finally((function(){var e=200,n=new Date-a;n>e?t.FakeLed=!1:setTimeout((function(){t.FakeLed=!1}),e-n),t.isAutoRefresh&&(t.RefreshTimer=setTimeout((function(){t.updateDevices()}),E))}))}}}},J=W,U=a("288c"),q=a("b0af"),z=a("99d9"),G=a("ac7c"),K=a("8fea"),Y=a("8dd9"),Q=a("1f4f"),X=a("b73d"),Z=a("71d9"),ee=Object(s["a"])(J,F,P,!1,null,null,null),te=ee.exports;u()(ee,{VBottomSheet:U["a"],VBtn:p["a"],VCard:q["a"],VCardActions:z["a"],VCardTitle:z["b"],VCheckbox:G["a"],VDataTable:K["a"],VIcon:h["a"],VSheet:Y["a"],VSimpleTable:Q["a"],VSpacer:k["a"],VSwitch:X["a"],VToolbar:Z["a"],VToolbarItems:V["a"],VToolbarTitle:V["b"]});var ae={name:"HelloWorld",components:{DeviceList:te},data:function(){return{}},computed:{},methods:{}},ne=ae,oe=a("62ad"),re=a("a523"),ie=a("0fd9"),ce=Object(s["a"])(ne,D,j,!1,null,null,null),se=ce.exports;u()(ce,{VCol:oe["a"],VContainer:re["a"],VRow:ie["a"]});var le={name:"Home",components:{HelloWorld:se}},ue=le,de=Object(s["a"])(ue,O,C,!1,null,null,null),ve=de.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"2"}},[e._v("x ")]),a("v-col",{attrs:{cols:"12",md:"7"}},[e._v("y ")]),a("v-col",{attrs:{cols:"12",md:"3"}},[e._v(" z ")])],1)],1)},pe=[],me={name:"Page2",components:{}},he=me,be=Object(s["a"])(he,fe,pe,!1,null,null,null),ye=be.exports;u()(be,{VCol:oe["a"],VContainer:re["a"],VRow:ie["a"]}),n["a"].use(L["a"]);var ge=[{path:"/",name:"Home",component:ve},{path:"/page2",name:"Page2",component:ye},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}}],_e=new L["a"]({routes:ge}),Se=_e;n["a"].config.productionTip=!1,new n["a"]({vuetify:R,router:Se,render:function(e){return e(A)}}).$mount("#app")}});
//# sourceMappingURL=app.26c877f2.js.map